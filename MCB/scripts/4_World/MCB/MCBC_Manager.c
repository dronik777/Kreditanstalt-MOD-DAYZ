class MCBC_Manager{ private PlayerBase m_Player; private string m_UID = ""; private ref MCBC_Bank m_MCBC_Bank; private bool m_Init = false; void MCBC_Manager() { if ( MCB_INT_DEBUG_LEVEL > 3 ) { MCBC_StaticFunctions.PrintDebug( "[Вход]: MCBC_Manager" ); } } void ~MCBC_Manager() { if ( MCB_INT_DEBUG_LEVEL > 3 ) { MCBC_StaticFunctions.PrintDebug( "[Выход]: MCBC_Manager" ); } } bool GetPlayer() { m_Player = PlayerBase.Cast( GetGame().GetPlayer() ); if ( !m_Player ) { return false; } if ( !m_Player.IsAlive() ) { return false; } return true; } void Init() { m_MCBC_Bank = new MCBC_Bank(); if ( !GetGame().IsMultiplayer() ) { if ( !m_MCBC_Bank ) { return; } m_MCBC_Bank.m_HotKeyMenu = 50; m_MCBC_Bank.m_Locations.Insert( new MCBC_Bank_Location( Vector( 0, 0, 0 ), 1000 ) ); m_MCBC_Bank.m_Locations.Insert( new MCBC_Bank_Location( Vector( 7500, 0, 7500 ), 7500 ) ); } m_Init = true; MCBC_StaticFunctions.PrintDebug( string.Format( "%1", "[Менеджер]: Инициализация завершена." ) ); } void OnKeyPress( int BGIJPJCYHGCYYDFKUMIXENQ ) { if ( !m_Init ) { return; } if ( !GetPlayer() ) { return; } if ( m_MCBC_Bank ) { m_MCBC_Bank.OnKeyPress( BGIJPJCYHGCYYDFKUMIXENQ ); } } void OnRPC( PlayerIdentity CHLXCYDESVPVSFPXNRIKXR, int PLDKAMAVTPVNFSOGILRRUSPDD, ParamsReadContext UWEYGVEIYGVMSTYUTPRROYVG ) { if ( !GetPlayer() ) { return; } if ( GetGame().IsServer() && GetGame().IsMultiplayer() ) { return; } if ( PLDKAMAVTPVNFSOGILRRUSPDD != MCB_INT_PACKET_ID_MOD ) { return; } int WLXRNGBITABEJGTDUDVGPNL = -1; string FNGGAQKIWPBDPCAFTWVYLQFXR = ""; Object WCISPBSLIVHXSSAWJQMIDOPAP = NULL; Param3<int, string, Object> DJYEIBTWJERRIOPOTKGO = new Param3<int, string, Object>( -1, "", NULL ); UWEYGVEIYGVMSTYUTPRROYVG.Read( DJYEIBTWJERRIOPOTKGO ); WLXRNGBITABEJGTDUDVGPNL = DJYEIBTWJERRIOPOTKGO.param1; FNGGAQKIWPBDPCAFTWVYLQFXR = DJYEIBTWJERRIOPOTKGO.param2; WCISPBSLIVHXSSAWJQMIDOPAP = DJYEIBTWJERRIOPOTKGO.param3; if ( MCB_INT_DEBUG_LEVEL > 3 ) { MCBC_StaticFunctions.PrintDebug( string.Format( "[OnRPC]: Идентификатор: %1, cтрока: %2, объект: %3.", WLXRNGBITABEJGTDUDVGPNL, FNGGAQKIWPBDPCAFTWVYLQFXR, WCISPBSLIVHXSSAWJQMIDOPAP ) ); } switch ( WLXRNGBITABEJGTDUDVGPNL ) { case MCB_INT_STC_PACKET_ID_UID: m_UID = FNGGAQKIWPBDPCAFTWVYLQFXR; break; case MCB_INT_STC_PACKET_ID_INIT: Init(); break; case MCB_INT_STC_PACKET_ID_BANK: if ( m_MCBC_Bank ) { m_MCBC_Bank.OnRPC( FNGGAQKIWPBDPCAFTWVYLQFXR ); } break; } }}ref MCBC_Manager MCBC_ManagerGlobal;